# Example "Shelf warmers"

## Context

Shelf warmers are articles in commerce that have been in stock for 3 months but have not been sold.

## Structure

The shelf warmer example uses two Terraform modules:
* [Module Confluent Kafka to AWS S3](https://github.com/datamesh-architecture/terraform-dataproduct-confluent-kafka-to-aws-s3)
* [Module AWS Athena](https://github.com/datamesh-architecture/terraform-dataproduct-aws-athena)

## Architecture

<div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;nav&quot;:true,&quot;resize&quot;:true,&quot;toolbar&quot;:&quot;zoom layers tags lightbox&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;drawio-plugin\&quot; modified=\&quot;2023-03-03T07:17:29.383Z\&quot; agent=\&quot;5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.5112.102 Safari/537.36\&quot; etag=\&quot;S_kBf8zFW1XmgmOPQcQg\&quot; version=\&quot;20.5.3\&quot; type=\&quot;embed\&quot;&gt;&lt;diagram id=\&quot;DWjpSvbVxY2pOprUcE6g\&quot; name=\&quot;Page-1\&quot;&gt;&lt;mxGraphModel dx=\&quot;815\&quot; dy=\&quot;1100\&quot; grid=\&quot;0\&quot; gridSize=\&quot;10\&quot; guides=\&quot;1\&quot; tooltips=\&quot;1\&quot; connect=\&quot;1\&quot; arrows=\&quot;1\&quot; fold=\&quot;1\&quot; page=\&quot;0\&quot; pageScale=\&quot;1\&quot; pageWidth=\&quot;827\&quot; pageHeight=\&quot;1169\&quot; math=\&quot;0\&quot; shadow=\&quot;0\&quot;&gt;&lt;root&gt;&lt;mxCell id=\&quot;0\&quot;/&gt;&lt;mxCell id=\&quot;1\&quot; parent=\&quot;0\&quot;/&gt;&lt;mxCell id=\&quot;258\&quot; value=\&quot;&amp;lt;b&amp;gt;Fullfillment&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Domain]\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;verticalAlign=bottom;fontStyle=0;arcSize=6;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;153\&quot; y=\&quot;53\&quot; width=\&quot;1951\&quot; height=\&quot;551\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;323\&quot; value=\&quot;&amp;lt;b&amp;gt;shelf_warmers&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Data Product]\&quot; style=\&quot;shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;rounded=0;glass=0;fontFamily=Helvetica;fontSize=12;size=163.05882352941194;verticalAlign=bottom;fillColor=#FCFCFC;fontColor=#333333;strokeColor=#666666;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1326.5\&quot; y=\&quot;96\&quot; width=\&quot;758\&quot; height=\&quot;449\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;322\&quot; value=\&quot;&amp;lt;b&amp;gt;stock_updated&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Raw Data Product]\&quot; style=\&quot;shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;rounded=0;glass=0;fontFamily=Helvetica;fontSize=12;size=163.05882352941194;verticalAlign=bottom;fillColor=#FCFCFC;fontColor=#333333;strokeColor=#666666;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;543\&quot; y=\&quot;95\&quot; width=\&quot;740\&quot; height=\&quot;449\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;263\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=classic;startFill=1;endArrow=none;endFill=0;sketch=1;\&quot; parent=\&quot;1\&quot; source=\&quot;260\&quot; target=\&quot;262\&quot; edge=\&quot;1\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;284\&quot; value=\&quot;poll\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontFamily=Helvetica;sketch=1;\&quot; parent=\&quot;263\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot;&gt;&lt;mxGeometry x=\&quot;0.5952\&quot; y=\&quot;3\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;-7\&quot; y=\&quot;-6\&quot; as=\&quot;offset\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;260\&quot; value=\&quot;\&quot; style=\&quot;shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;rotation=-90;fillColor=#d5e8d4;strokeColor=#82b366;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;403\&quot; y=\&quot;230\&quot; width=\&quot;60\&quot; height=\&quot;153\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;261\&quot; value=\&quot;&amp;lt;b&amp;gt;stock&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Kafka Topic]\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;386.25\&quot; y=\&quot;291.5\&quot; width=\&quot;98\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;265\&quot; style=\&quot;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;sketch=1;\&quot; parent=\&quot;1\&quot; source=\&quot;262\&quot; target=\&quot;271\&quot; edge=\&quot;1\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;965\&quot; y=\&quot;306.5\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;283\&quot; value=\&quot;store\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontFamily=Helvetica;sketch=1;\&quot; parent=\&quot;265\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot;&gt;&lt;mxGeometry x=\&quot;0.0516\&quot; y=\&quot;4\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;-2\&quot; y=\&quot;-5\&quot; as=\&quot;offset\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;262\&quot; value=\&quot;&amp;lt;b&amp;gt;Topic to S3&amp;lt;br&amp;gt;&amp;lt;/b&amp;gt;[S3 Sink Connector for Confluent]\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;610\&quot; y=\&quot;276.5\&quot; width=\&quot;160\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;269\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;sketch=1;\&quot; parent=\&quot;1\&quot; source=\&quot;268\&quot; target=\&quot;260\&quot; edge=\&quot;1\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;268\&quot; value=\&quot;&amp;lt;b style=&amp;quot;font-size: 12px;&amp;quot;&amp;gt;Stock Service&amp;lt;br style=&amp;quot;font-size: 12px;&amp;quot;&amp;gt;&amp;lt;/b&amp;gt;[Spring Boot]\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;verticalAlign=middle;fontSize=12;fillColor=#E0E0E0;fontColor=#333333;strokeColor=#666666;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;182\&quot; y=\&quot;273\&quot; width=\&quot;128\&quot; height=\&quot;67\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;274\&quot; style=\&quot;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Helvetica;fontSize=11;dashed=1;sketch=1;\&quot; parent=\&quot;1\&quot; source=\&quot;273\&quot; target=\&quot;271\&quot; edge=\&quot;1\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;282\&quot; value=\&quot;describe\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontFamily=Helvetica;sketch=1;\&quot; parent=\&quot;274\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot;&gt;&lt;mxGeometry x=\&quot;-0.7437\&quot; y=\&quot;-1\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;-32\&quot; y=\&quot;-9\&quot; as=\&quot;offset\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;273\&quot; value=\&quot;&amp;lt;font face=&amp;quot;Helvetica&amp;quot; style=&amp;quot;font-size: 12px;&amp;quot;&amp;gt;&amp;lt;b style=&amp;quot;font-size: 12px;&amp;quot;&amp;gt;stock_updated&amp;lt;br style=&amp;quot;font-size: 12px;&amp;quot;&amp;gt;&amp;lt;/b&amp;gt;[AWS Glue Catalog Table]&amp;lt;/font&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;fontFamily=Courier New;fontSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1078\&quot; y=\&quot;276.5\&quot; width=\&quot;160\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;275\&quot; value=\&quot;&amp;lt;b&amp;gt;Discovery API&amp;lt;br&amp;gt;&amp;lt;/b&amp;gt;[Lambda Endpoint]\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;834.12\&quot; y=\&quot;113\&quot; width=\&quot;160\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;277\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Helvetica;fontSize=11;dashed=1;sketch=1;\&quot; parent=\&quot;1\&quot; target=\&quot;275\&quot; edge=\&quot;1\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;913\&quot; y=\&quot;-39\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;278\&quot; value=\&quot;GET https://example.com/datamesh/fulfillment/stock_updated/\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontFamily=Helvetica;sketch=1;\&quot; parent=\&quot;277\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot;&gt;&lt;mxGeometry x=\&quot;-0.4096\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint as=\&quot;offset\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;276\&quot; value=\&quot;&amp;lt;b&amp;gt;Data Product Inventory&amp;lt;br&amp;gt;&amp;lt;/b&amp;gt;[Custom Web App]\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;sketch=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;751\&quot; y=\&quot;-100\&quot; width=\&quot;1147\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;UserObject label=\&quot;&amp;lt;b&amp;gt;stock_updated event&amp;lt;br&amp;gt;&amp;lt;/b&amp;gt;[JSON Schema]\&quot; link=\&quot;https://github.com/datamesh-architecture/terraform-dataproduct-examples/blob/main/shelf_warmers/dataproduct-confluent-kafka-to-aws-s3/schema/stock_updated.schema.json\&quot; linkTarget=\&quot;_blank\&quot; id=\&quot;279\&quot;&gt;&lt;mxCell style=\&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;370.75\&quot; y=\&quot;371\&quot; width=\&quot;129\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;/UserObject&gt;&lt;mxCell id=\&quot;297\&quot; value=\&quot;&amp;lt;b&amp;gt;Discovery API&amp;lt;br&amp;gt;&amp;lt;/b&amp;gt;[Lambda Endpoint]\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1625.5\&quot; y=\&quot;116\&quot; width=\&quot;160\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;299\&quot; style=\&quot;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Helvetica;fontSize=11;startArrow=none;startFill=0;endArrow=classic;endFill=1;dashed=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;sketch=1;\&quot; parent=\&quot;1\&quot; source=\&quot;298\&quot; target=\&quot;273\&quot; edge=\&quot;1\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;Array as=\&quot;points\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;300\&quot; value=\&quot;use\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontFamily=Helvetica;sketch=1;\&quot; parent=\&quot;299\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot;&gt;&lt;mxGeometry x=\&quot;-0.4701\&quot; y=\&quot;1\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;5\&quot; y=\&quot;-11\&quot; as=\&quot;offset\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;304\&quot; value=\&quot;store\&quot; style=\&quot;edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Helvetica;fontSize=11;startArrow=none;startFill=0;endArrow=classic;endFill=1;sketch=1;\&quot; parent=\&quot;1\&quot; source=\&quot;298\&quot; target=\&quot;302\&quot; edge=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;-0.0508\&quot; y=\&quot;9\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint as=\&quot;offset\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;298\&quot; value=\&quot;&amp;lt;b&amp;gt;SQL Query&amp;lt;br&amp;gt;&amp;lt;/b&amp;gt;[AWS Athena Query]\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1427.5\&quot; y=\&quot;277.5\&quot; width=\&quot;160\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;303\&quot; value=\&quot;describe\&quot; style=\&quot;edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;fontFamily=Helvetica;fontSize=11;startArrow=none;startFill=0;endArrow=classic;endFill=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;sketch=1;\&quot; parent=\&quot;1\&quot; source=\&quot;301\&quot; target=\&quot;302\&quot; edge=\&quot;1\&quot;&gt;&lt;mxGeometry y=\&quot;-12\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;Array as=\&quot;points\&quot;/&gt;&lt;mxPoint as=\&quot;offset\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;301\&quot; value=\&quot;&amp;lt;font face=&amp;quot;Helvetica&amp;quot; style=&amp;quot;font-size: 12px;&amp;quot;&amp;gt;&amp;lt;b style=&amp;quot;font-size: 12px;&amp;quot;&amp;gt;shelf_warmers&amp;lt;br style=&amp;quot;font-size: 12px;&amp;quot;&amp;gt;&amp;lt;/b&amp;gt;[AWS Glue Catalog Table]&amp;lt;/font&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;fontFamily=Courier New;fontSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1872.5\&quot; y=\&quot;277.5\&quot; width=\&quot;160\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;302\&quot; value=\&quot;&amp;lt;b&amp;gt;Parquet Files&amp;lt;br&amp;gt;&amp;lt;/b&amp;gt;[AWS S3 Bucket]&amp;lt;br&amp;gt;&amp;lt;font style=&amp;quot;font-size: 9px;&amp;quot;&amp;gt;s3://fulfillment-shelf_warmers&amp;lt;/font&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1625.5\&quot; y=\&quot;277.5\&quot; width=\&quot;160\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;307\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Helvetica;fontSize=11;dashed=1;sketch=1;\&quot; parent=\&quot;1\&quot; target=\&quot;297\&quot; edge=\&quot;1\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;1705.5\&quot; y=\&quot;-40\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;744.0000000000005\&quot; y=\&quot;160\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;308\&quot; value=\&quot;GET https://example.com/datamesh/fulfillment/shelf_warmers/\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontFamily=Helvetica;sketch=1;\&quot; parent=\&quot;307\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot;&gt;&lt;mxGeometry x=\&quot;-0.4096\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint y=\&quot;4\&quot; as=\&quot;offset\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;309\&quot; value=\&quot;&amp;lt;font face=&amp;quot;Helvetica&amp;quot;&amp;gt;&amp;lt;b&amp;gt;Access Control&amp;lt;br&amp;gt;&amp;lt;/b&amp;gt;[AWS IAM Policy]&amp;lt;/font&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;fontFamily=Courier New;fontSize=11;fillColor=#f8cecc;strokeColor=#b85450;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;832\&quot; y=\&quot;445\&quot; width=\&quot;160\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;312\&quot; value=\&quot;&amp;lt;font face=&amp;quot;Helvetica&amp;quot;&amp;gt;&amp;lt;b&amp;gt;Access Control&amp;lt;br&amp;gt;&amp;lt;/b&amp;gt;[AWS IAM Policy]&amp;lt;/font&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;fontFamily=Courier New;fontSize=11;fillColor=#f8cecc;strokeColor=#b85450;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1625.5\&quot; y=\&quot;446\&quot; width=\&quot;160\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;313\&quot; value=\&quot;&amp;lt;b&amp;gt;Run daily at midnight&amp;lt;br&amp;gt;&amp;lt;/b&amp;gt;[AWS EventBridge Scheduler]\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1427.5\&quot; y=\&quot;185\&quot; width=\&quot;160\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;324\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;fontFamily=Helvetica;fontSize=11;startArrow=none;startFill=0;endArrow=classic;endFill=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;sketch=1;\&quot; parent=\&quot;1\&quot; source=\&quot;313\&quot; target=\&quot;298\&quot; edge=\&quot;1\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;1482.016129032258\&quot; y=\&quot;245\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;1454.5\&quot; y=\&quot;738\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;325\&quot; value=\&quot;trigger lambda\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontFamily=Helvetica;sketch=1;\&quot; parent=\&quot;324\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot;&gt;&lt;mxGeometry x=\&quot;-0.0265\&quot; y=\&quot;-1\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint y=\&quot;1\&quot; as=\&quot;offset\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;326\&quot; value=\&quot;https://github.com/datamesh-architecture/terraform-dataproduct-confluent-kafka-to-aws-s3\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;glass=0;fontFamily=Helvetica;fontSize=9;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;704.62\&quot; y=\&quot;537\&quot; width=\&quot;419\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;327\&quot; value=\&quot;https://github.com/datamesh-architecture/terraform-dataproduct-aws-athena\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;glass=0;fontFamily=Helvetica;fontSize=9;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1504\&quot; y=\&quot;540\&quot; width=\&quot;419\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;328\&quot; value=\&quot;Terraform Module\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;glass=0;fontFamily=Helvetica;fontSize=9;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;702\&quot; y=\&quot;97\&quot; width=\&quot;60\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;329\&quot; value=\&quot;Terraform Module\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;glass=0;fontFamily=Helvetica;fontSize=9;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1487.5\&quot; y=\&quot;100\&quot; width=\&quot;60\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;271\&quot; value=\&quot;&amp;lt;b&amp;gt;JSON Files&amp;lt;br&amp;gt;&amp;lt;/b&amp;gt;[AWS S3 Bucket]&amp;lt;br&amp;gt;&amp;lt;font style=&amp;quot;font-size: 9px;&amp;quot;&amp;gt;s3://fulfillment-stock_updated&amp;lt;/font&amp;gt;\&quot; style=\&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;sketch=1;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;834.12\&quot; y=\&quot;276.5\&quot; width=\&quot;160\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;332\&quot; value=\&quot;\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Helvetica;fontSize=11;dashed=1;startArrow=classic;startFill=1;endArrow=none;endFill=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;sketch=1;\&quot; parent=\&quot;1\&quot; source=\&quot;279\&quot; target=\&quot;273\&quot; edge=\&quot;1\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;499.75\&quot; y=\&quot;401\&quot; as=\&quot;sourcePoint\&quot;/&gt;&lt;mxPoint x=\&quot;1280.4705882352941\&quot; y=\&quot;336.5\&quot; as=\&quot;targetPoint\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;333\&quot; value=\&quot;use schema to define table\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontFamily=Helvetica;sketch=1;\&quot; parent=\&quot;332\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot;&gt;&lt;mxGeometry x=\&quot;-0.2437\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;&lt;mxPoint x=\&quot;2\&quot; y=\&quot;-11\&quot; as=\&quot;offset\&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;364\&quot; style=\&quot;edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.75;entryDx=0;entryDy=0;dashed=1;strokeWidth=2;fontFamily=Helvetica;fontSize=12;startArrow=classic;startFill=1;endArrow=classic;endFill=1;sketch=1;\&quot; parent=\&quot;1\&quot; source=\&quot;273\&quot; target=\&quot;273\&quot; edge=\&quot;1\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;367\&quot; value=\&quot;datamesh-architecture.com\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=1;fillStyle=hachure;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=12;fontColor=#000000;\&quot; parent=\&quot;1\&quot; vertex=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1817.5\&quot; y=\&quot;608\&quot; width=\&quot;270\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;/root&gt;&lt;/mxGraphModel&gt;&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div>
<script type="text/javascript" src="https://viewer.diagrams.net/js/viewer-static.min.js"></script>

### `GET /datamesh/fulfillment/stock_updated`

TBD

```json
{}
```

### `GET /datamesh/fulfillment/shelf_warmers`

TBD

```json
{}
```

## Requirements

| Name                                                                      | Version    |
|---------------------------------------------------------------------------|------------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.3.7   |
| <a name="requirement_aws"></a> [aws](#requirement\_aws)                   | >= 4.56    |
| <a name="requirement_confluent"></a> [confluent](#requirement\_confluent) | >= 1.34    |

## Providers

| Name                                                                | Version   |
|---------------------------------------------------------------------|-----------|
| <a name="provider_aws"></a> [aws](#provider\_aws)                   | >= 4.56   |
| <a name="provider_confluent"></a> [confluent](#provider\_confluent) | >= 1.34   |

## Usage

### Setup first data product "dataproduct-confluent-kafka-to-aws-s3"
1. `cd dataproduct-confluent-kafka-to-aws-s3`
2. `cp .terraform.tfvars.template .terraform.tfvars` and enter AWS and Confluent credentials
3. Replace `<aws_account_id>` in `main.tf`
4. `terraform apply`
5. Enter `yes` and press ENTER

### Setup second data product "dataproduct-aws-athena-shelf_warmers"
1. `cd dataproduct-aws-athena-shelf_warmers`
2. `cp .terraform.tfvars.template .terraform.tfvars` and enter AWS credentials
3. Replace `<data_product_endpoint>` in `main.tf` with the endpoint provided by the first data product
4. `terraform apply`
5. Enter `yes` and press ENTER
